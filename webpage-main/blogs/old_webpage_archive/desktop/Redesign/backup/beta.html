<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Request Beta Access - Saddle AdPulse</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="container">
            <div class="nav-content">
                <div class="logo">
                    <a href="index.html"><img src="logo.png" alt="Saddle"></a>
                </div>
                <div class="nav-links">
                    <a href="index.html">Home</a>
                    <a href="audit.html" class="cta-button">Run Impact Check</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Beta Signup Section -->
    <section class="beta-hero">
        <div class="container">
            <div class="beta-signup-wrapper">
                <div class="beta-intro">
                    <h1>Request Private Beta Access</h1>
                    <p class="beta-subtitle">Join sellers and agencies getting early access to decision intelligence for
                        Amazon PPC.</p>
                </div>

                <form id="betaSignupForm" class="beta-form">
                    <div class="form-group">
                        <label for="betaName">Name</label>
                        <input type="text" id="betaName" name="name" required placeholder="Your full name">
                    </div>

                    <div class="form-group">
                        <label for="betaEmail">Work Email</label>
                        <input type="email" id="betaEmail" name="email" required placeholder="you@company.com">
                    </div>

                    <div class="form-group">
                        <label for="betaRole">What best describes you?</label>
                        <select id="betaRole" name="role" required>
                            <option value="">Select one...</option>
                            <option value="seller">Amazon Seller</option>
                            <option value="agency">Agency / Consultant</option>
                            <option value="inhouse">In-house Brand Operator</option>
                            <option value="other">Other</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="betaAccounts">How many Amazon ad accounts do you manage?</label>
                        <select id="betaAccounts" name="accounts" required>
                            <option value="">Select one...</option>
                            <option value="1">1</option>
                            <option value="2-5">2–5</option>
                            <option value="6-20">6–20</option>
                            <option value="20+">20+</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="betaSpend">Approx. monthly Amazon ad spend</label>
                        <select id="betaSpend" name="spend" required>
                            <option value="">Select one...</option>
                            <option value="<10k">&lt;$10k</option>
                            <option value="10k-50k">$10k–$50k</option>
                            <option value="50k-200k">$50k–$200k</option>
                            <option value="200k+">$200k+</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="betaGoal">What are you hoping to understand or prove with AdPulse?
                            (Optional)</label>
                        <textarea id="betaGoal" name="goal" rows="3"
                            placeholder="Tell us what you're looking to accomplish..."></textarea>
                    </div>

                    <button type="submit" class="primary-button-large" style="width: 100%; margin-top: 1.5rem;">
                        Request Private Beta Access
                    </button>

                    <p class="form-disclaimer">We'll review your application and reach out within 1-2 business days.</p>
                </form>

                <!-- Success Message (hidden by default) -->
                <div id="betaSuccessMessage" class="beta-success-message hidden">
                    <div class="success-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" width="48"
                            height="48">
                            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                            <polyline points="22 4 12 14.01 9 11.01"></polyline>
                        </svg>
                    </div>
                    <h3>Application Received!</h3>
                    <p>Thanks for your interest in AdPulse. We'll review your application and reach out within 1-2
                        business days.</p>
                    <a href="index.html" class="secondary-button-large">Back to Home</a>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <!-- Empty section for spacing -->
                </div>
                <div class="footer-section">
                    <h4>Product</h4>
                    <a href="features.html">Features</a>
                    <a href="how-it-works.html">How It Works</a>
                    <a href="compare.html">Compare</a>
                    <a href="audit.html">Run Impact Check</a>
                </div>
                <div class="footer-section">
                    <h4>Solutions</h4>
                    <a href="agencies.html">For Agencies</a>
                    <a href="features.html">For Sellers</a>
                </div>
                <div class="footer-section">
                    <h4>Company</h4>
                    <a href="about.html">About</a>
                    <a href="faq.html">FAQ</a>
                    <a href="privacy.html">Privacy</a>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Saddle AdPulse. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Supabase Client -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <script>
        // ========================================
        // SUPABASE CONFIGURATION
        // Replace these with your actual Supabase credentials
        // For Netlify deployment, these should be set as environment variables
        // and injected during build, or use Netlify's environment variable injection
        // ========================================
        
        // IMPORTANT: These are the PUBLIC (anon) credentials - safe to expose in frontend
        // Your RLS policies protect the data, not these keys
        const SUPABASE_URL = 'YOUR_SUPABASE_URL'; // e.g., 'https://xxxxx.supabase.co'
        const SUPABASE_ANON_KEY = 'YOUR_SUPABASE_ANON_KEY'; // The public anon key
        
        // Initialize Supabase client
        let supabase = null;
        if (SUPABASE_URL !== 'YOUR_SUPABASE_URL' && SUPABASE_ANON_KEY !== 'YOUR_SUPABASE_ANON_KEY') {
            supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
        }
        
        // Form submission handler
        document.getElementById('betaSignupForm').addEventListener('submit', async function (e) {
            e.preventDefault();
            
            const submitBtn = this.querySelector('button[type="submit"]');
            const originalText = submitBtn.textContent;
            submitBtn.textContent = 'Submitting...';
            submitBtn.disabled = true;
            
            // Get form data
            const formData = new FormData(this);
            const data = {
                name: formData.get('name'),
                email: formData.get('email'),
                role: formData.get('role'),
                accounts: formData.get('accounts'),
                monthly_spend: formData.get('spend'),
                goal: formData.get('goal') || null,
                source: 'landing_page'
            };
            
            try {
                if (supabase) {
                    // Save to Supabase
                    const { error } = await supabase
                        .from('beta_signups')
                        .insert([data]);
                    
                    if (error) {
                        // Check for duplicate email
                        if (error.code === '23505') {
                            alert('This email is already registered for beta access. We\'ll be in touch soon!');
                            submitBtn.textContent = originalText;
                            submitBtn.disabled = false;
                            return;
                        }
                        throw error;
                    }
                    
                    console.log('Beta signup saved to Supabase:', data);
                } else {
                    // Fallback: Log to console if Supabase not configured
                    console.log('Supabase not configured. Beta signup data:', data);
                    console.warn('To save to database, configure SUPABASE_URL and SUPABASE_ANON_KEY');
                }
                
                // Show success message
                this.classList.add('hidden');
                document.getElementById('betaSuccessMessage').classList.remove('hidden');
                
            } catch (error) {
                console.error('Error saving beta signup:', error);
                alert('There was an error submitting your request. Please try again or contact us directly.');
                submitBtn.textContent = originalText;
                submitBtn.disabled = false;
            }
        });
    </script>
</body>

</html>